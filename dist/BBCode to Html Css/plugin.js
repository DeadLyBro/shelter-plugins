(()=>{var s=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var y=(a,n)=>{for(var e in n)s(a,e,{get:n[e],enumerable:!0})},C=(a,n,e,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of $(n))!E.call(a,r)&&r!==e&&s(a,r,{get:()=>n[r],enumerable:!(i=b(n,r))||i.enumerable});return a};var v=a=>C(s({},"__esModule",{value:!0}),a);var D={};y(D,{force:()=>u,onLoad:()=>F,onUnload:()=>w});var{flux:{dispatcher:p,awaitStore:S},observeDom:k}=shelter;document.querySelector("style#DeadLyBro-BBCode-CSS")||(c=document.getElementsByTagName("HEAD")[0],d=document.createElement("style"),d.id="DeadLyBro-BBCode-CSS",d.innerHTML=".DeadLyBro-BBCode { overflow: auto!important; } th, td { padding: 5px 10px!important; } tr:nth-child(odd) { background: #2b2d31!important; } table { border-radius: 5px!important; } table { border-collapse: collapse!important; margin: 10px!important; } tr:first-child th { text-align: center!important; font-weight: 600!important; } tr:not(:first-child) th { color: red!important; font-weight: 600!important; text-align: center; } ",c.appendChild(d));var c,d,g="div[class^=scrollerContent] div[class^=markup][class*=messageContent]";function u(){for(let a of document.querySelectorAll(g))m(a,!0)}async function m(a,n=!1){if(a.querySelector(".DeadLyBro-BBCode")&&!n||!a.textContent.startsWith("["))return;console.log(`%cDEBUG:%c ${a.textContent}`,"-webkit-text-stroke: 1px black; border-radius: 5px; padding: 5px; background: -moz-linear-gradient(112deg, #1301FE 0, #F4F60C 100%); background: -webkit-gradient(linear, 112deg, color-stop(0, 1301FE), color-stop(100%, F4F60C)); background: -webkit-linear-gradient(112deg, #1301FE 0, #F4F60C 100%); background: -o-linear-gradient(112deg, #1301FE 0, #F4F60C 100%); background: -ms-linear-gradient(112deg, #1301FE 0, #F4F60C 100%); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#1301FE', endColorstr='#F4F60C', GradientType='1'); background: linear-gradient(112deg, #1301FE 0, #F4F60C 100%);","");let e=a.textContent,i="\xA0";e.replace(/<span>(.*?)<\/span>/gs,"$1"),e=e.replace(/\[code\](.*?)\[\/code\]/gs,(r,t)=>`<pre style="padding: 10px; overflow: auto;"><code style="font-family: 'Courier New', Courier, monospace; font-size: 14px;padding: 5px; border-radius: 5px;">${t}</code></pre>`),e=e.replace(/\[code=([^\]]+)\](.*?)\[\/code\]/gs,(r,t,o)=>`<pre style="padding: 10px; overflow: auto;"><code style="font-family: 'Courier New', Courier, monospace; font-size: 14px;padding: 5px; border-radius: 5px;" class="${t}">${o}</code></pre>`),e=e.replace(/\[pre\](.*?)\[\/pre\]/gs,(r,t)=>`<pre>${t}</pre>`),e=e.replace(/\[table\](.*?)\[\/table\]/gs,(r,t)=>`<table>${t}</table>`),e=e.replace(/\[tr\](.*?)\[\/tr\]/gs,(r,t)=>`<tr>${t}</tr>`),e=e.replace(/\[th\](.*?)\[\/th\]/gs,(r,t)=>`<th>${t}</th>`),e=e.replace(/\[td\](.*?)\[\/td\]/gs,(r,t)=>`<td>${t}</td>`),e=e.replace(/\[youtube\](.*?)\[\/youtube\]/gs,(r,t)=>`<iframe width="560" height="315" src="https://www.youtube.com/embed/${t}" frameborder="0" allowfullscreen></iframe>`),e=e.replace(/\[spoiler=([^\]]+)\](.*?)\[\/spoiler\]/g,(r,t,o)=>`<div style="border: 2px solid #d17f19; border-radius: 4px;"><div onclick="toggleSpoiler(this)" style="cursor: pointer; background-color: var(--background-tertiary); padding: 5px; font-weight: bold;">${t}</div><div style="padding: 5px; display: none;">${o}</div></div>`),e=e.replace(/\[spoiler\](.*?)\[\/spoiler\]/g,(r,t)=>`<div style="border: 2px solid #d17f19; border-radius: 4px;"><div onclick="toggleSpoiler(this)" style="cursor: pointer; background-color: var(--background-tertiary); padding: 5px; font-weight: bold;">Spoiler</div><div style="padding: 5px; display: none;">${t}</div></div>`),e=e.replace(/\[br\]/g,"<br />"),e=e.replace(/\[quote\](.*?)\[\/quote\]/g,(r,t)=>`<span style="border-left: 2px solid #ccc; border-radius: 4px; display: block; padding: 0px 8px 0px 12px;">${t}</span>`),e=e.replace(/\[quote=([^\]]+)\](.*?)\[\/quote\]/g,(r,t,o)=>`<span style="border-left: 2px solid #ccc; border-radius: 4px; padding: 0px 8px 0px 12px; display: block;"><strong>${t}:</strong> ${o}</span>`),e=e.replace(/\[left\](.*?)\[\/left\]/g,'<span style="float: left;">$1</span>'),e=e.replace(/\[right\](.*?)\[\/right\]/g,'<span style="float: right;">$1</span>'),e=e.replace(/\[color=([^\]]+)\](.*?)\[\/color\]/g,(r,t,o)=>`<span style="color: ${/^(#?[0-9A-Fa-f]{6}|[a-zA-Z]+)$/i.test(t)?t:"#000"}">${o}</span>`),e=e.replace(/\[font="([^"]+)"\](.*?)\[\/font\]/g,(r,t,o)=>`<span style="font-family: ${t}">${o}</span>`),e=e.replace(/\[size=(\d+)\](.*?)\[\/size\]/g,(r,t,o)=>`<span style="font-size: ${t}px">${o}</span>`),e=e.replace(/\[style size="?(\d+)px"?\](.*?)\[\/style\]/g,(r,t,o)=>`<span style="font-size: ${t}px">${o}</span>`),e=e.replace(/\[b\](.*?)\[\/b\]/g,"<strong>$1</strong>"),e=e.replace(/\[i\](.*?)\[\/i\]/g,"<em>$1</em>"),e=e.replace(/\[u\](.*?)\[\/u\]/g,"<u>$1</u>"),e=e.replace(/\[s\](.*?)\[\/s\]/g,"<s>$1</s>"),e=e.replace(/\[url=([^\]]+)\](.*?)\[\/url\]/g,(r,t,o)=>`<a href="${t}" target="_blank">${o}</a>`),e=e.replace(/\[url\](.*?)\[\/url\]/g,(r,t)=>`<a href="${t}" target="_blank">${t}</a>`),e=e.replace(/\[img width=(\d+) height=(\d+)(.*?)\](.*?)\[\/img\]/g,(r,t,o,l,x)=>`<img src="${x}" style="max-width:${t}px; max-height:${o}px;" ${l} alt="Image">`),e=e.replace(/\[img=(\d+)x(\d+)\](.*?)\[\/img\]/g,(r,t,o,l)=>`<img src="${l}" style="max-width:${t}px; max-height:${o}px;" alt="Image">`),e=e.replace(/\[img\](.*?)\[\/img\]/g,(r,t)=>`<img src="${t}" alt="Image">`),e=e.replace(/\[center\](.*?)\[\/center\]/g,'<div style="text-align: center;">$1</div>'),a.innerHTML=`<div class='DeadLyBro-BBCode'>${e}</div>`}async function h(a){let n=await S("SelectedChannelStore");if(a.type==="MESSAGE_CREATE"&&a.channelId!==n.getChannelId())return;let e=k(g,i=>{e(),m(i)});setTimeout(e,500)}var f=["MESSAGE_CREATE","CHANNEL_SELECT","LOAD_MESSAGES_SUCCESS","UPDATE_CHANNEL_DIMENSIONS","GUILD_MEMBER_UPDATE","USER_NOTE_LOADED","GUILD_MEMBER_PROFILE_UPDATE","USER_UPDATE"];function F(){u();for(let a of f)p.subscribe(a,h)}function w(){for(let a of f)p.unsubscribe(a,h)}return v(D);})();
